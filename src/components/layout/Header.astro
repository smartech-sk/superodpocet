---
type NavItem = {
  href: string;
  label: string;
};

const navItems: NavItem[] = [
  { href: "/vyskum-a-vyvoj", label: "Výskum a vývoj" },
  { href: "/patent-box", label: "Patent Box" },
  { href: "/investicie", label: "Investície do Priemyslu 4.0" },
  { href: "/#seminare", label: "Semináre" },
  { href: "/#kontakt", label: "Kontakt" },
];

// Logika pre aktívnu položku menu
const currentPath = Astro.url.pathname;

const isActive = (path: string) => {
  if (path === "/" && currentPath === "/") return true;
  if (path !== "/" && currentPath.startsWith(path)) return true;
  return false;
};
---

<header class="site-header">
  <div class="container header-inner">
    <a href="/" class="logo">
      SUPERODPOČET<span class="logo-accent">.sk</span>
    </a>

    <button
      class="mobile-nav-toggle"
      type="button"
      aria-label="Otvoriť navigáciu"
      aria-controls="mobile-menu"
      aria-expanded="false"
    >
      <span class="sr-only">Prepínač navigácie</span>
      <span class="mobile-nav-icon"></span>
    </button>

    <nav id="mobile-menu" class="main-nav" aria-label="Hlavná navigácia">
      {navItems.map((item) => (
        <a
          href={item.href}
          class={isActive(item.href)
            ? "main-nav-link main-nav-link--active"
            : "main-nav-link"}
        >
          {item.label}
        </a>
      ))}
    </nav>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const header = document.querySelector(".site-header");
      const toggle = document.querySelector(".mobile-nav-toggle");
      const menu = document.getElementById("mobile-menu");

      if (!header || !toggle || !menu) return;

      toggle.addEventListener("click", () => {
        const isOpen = header.classList.toggle("site-header--mobile-open");
        toggle.setAttribute("aria-expanded", isOpen ? "true" : "false");
      });
    });
  </script>
</header>
