---
import BaseLayout from "../layouts/BaseLayout.astro";
import VaVCalculator from "../components/calculators/VavCalculator.astro";
import FAQ from "../components/widgets/FAQ.astro";
import ProcessSteps from "../components/widgets/ProcessSteps.astro";
import { getEntry } from "astro:content";

const pageContent = await getEntry("pages", "vyskum-a-vyvoj");
const { Content } = await pageContent.render();
const { title, description, hero } = pageContent.data;

const processSteps = [
  {
    letter: "1",
    title: "Identifikácia činností ako výskum a vývoj",
    description:
      "Určte, ktoré aktivity vo vašej firme spĺňajú podmienky VaV projektu.",
  },
  {
    letter: "2",
    title: "Vypracovanie písomného projektu VaV",
    description:
      "Vytvorte dokumentáciu projektu podľa zákonných požiadaviek.",
  },
  {
    letter: "3",
    title: "Oddelená evidencia a vyčíslenie daňových výdavkov",
    description:
      "Vedenie osobitnej evidencie nákladov súvisiacich s projektom.",
  },
  {
    letter: "4",
    title: "Kontrola vylúčených položiek a zákazu kumulácie",
    description:
      "Overenie, že náklady nie sú vylúčené a nekombinujú sa s inými odpočtami.",
  },
  {
    letter: "5",
    title: "Výpočet superodpočtu na VaV",
    description:
      "Vypočítanie výšky odpočtu podľa platnej legislatívy.",
  },
  {
    letter: "6",
    title: "Uplatnenie superodpočtu v daňovom priznaní",
    description: "Zahrnutie odpočtu do daňového priznania.",
  },
];

const contact = {
  name: "Ing. Mgr. Martin Gondár",
  role: "managing partner SmarTech Solutions SK",
  phone: "+421 904 352 451",
  email: "gondar@smartech.sk",
};
---

<BaseLayout title={title} description={description}>
  <!-- HERO -->
  <section class="page-hero">
    <div class="container">
      <p class="page-hero-label">VÝSKUM A VÝVOJ</p>
      <h1 class="page-hero-title">
        {hero.heading}
      </h1>
    </div>
  </section>

  <!-- ÚVODNÝ TEXT + KALKULAČKA POD NÍM -->
  <section class="page-section page-section--light">
    <div class="container">
      <div class="home-section-divider"></div>
      <div class="vav-intro-text">
        <div class="vav-intro-copy">
          {hero.text}
        </div>
      </div>
      
      <div class="vav-calc-card">
        <h2 class="vav-calc-heading">Kalkulačka úspory</h2>
        <VaVCalculator />
      </div>

    </div>
  </section>

    <!-- PROCES UPLATNENIA -->
  <section class="page-section vav-process-section">
    <div class="container">
      <div class="home-section-divider"></div>
      <h2 class="page-section-title">Proces uplatnenia v bodoch</h2>
      <ProcessSteps steps={processSteps} />
    </div>
  </section>

    <!-- FAQ BLOK -->
  <section class="page-section page-section--light vav-faq-section">
    <div class="container">
      <div class="home-section-divider"></div>
      <h2 class="page-section-title">
        Najčastejšie otázky k superodpočtu na výskum a vývoj
      </h2>
      <FAQ category="vav" />
    </div>
  </section>

  <!-- KONTAKT (rovnaký štýl ako na homepage) -->
  <section class="home-section" id="kontakt">
    <div class="container">
      <div class="home-section-divider"></div>

      <h2>Získajte odpoveď ihneď od odborníka s praxou.</h2>
      <p class="home-section-text">
        Každá firma je iná a preto sa radi pozrieme na konkrétne možnosti
        uplatnenia superodpočtu u Vás.
      </p>

      <div class="home-contact-card">
        <div>
          <p class="home-contact-name">{contact.name}</p>
          <p class="home-contact-role">{contact.role}</p>
          <p class="home-contact-contact">
            {contact.phone}
            <br />
            {contact.email}
          </p>

          <a
            href="https://www.smartech.sk"
            class="home-contact-button"
            target="_blank"
            rel="noopener"
          >
            Kontaktujte nás
          </a>
        </div>

        <div class="home-contact-photo">
          <img
            src="/images/MGO.webp"
            alt="Ing. Mgr. Martin Gondár"
            loading="lazy"
            decoding="async"
          />
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
