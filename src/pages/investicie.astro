---
import BaseLayout from '../layouts/BaseLayout.astro';
import InvesticieCalculator from '../components/calculators/InvesticieCalculator.astro';
import FAQ from '../components/widgets/FAQ.astro';
import ProcessSteps from '../components/widgets/ProcessSteps.astro';
import { getEntry } from 'astro:content';

const pageContent = await getEntry('pages', 'investicie');
const { Content } = await pageContent.render();
const { title, description, hero, benefits, warning } = pageContent.data;

const processSteps = [
  {
    letter: '1',
    title: 'Overenie, že ide o investíciu podľa § 30e',
    description: 'Kontrola, či investícia spadá pod podporované technológie Priemyslu 4.0.',
  },
  {
    letter: '2',
    title: 'Vypracovanie investičného plánu',
    description: 'Príprava dokumentácie k plánovanej investícii.',
  },
  {
    letter: '3',
    title: 'Aktivácia investície',
    description: 'Zaradenie majetku do užívania.',
  },
  {
    letter: '4',
    title: 'Daňový výpočet a evidencia',
    description: 'Vypočítanie výšky odpočtu a vedenie evidencie.',
  },
  {
    letter: '5',
    title: 'Kontrola splnenia investičného limitu',
    description: 'Overenie podmienok pre uplatnenie odpočtu.',
  },
  {
    letter: '6',
    title: 'Uplatnenie superodpočtu v daňovom priznaní',
    description: 'Zahrnutie odpočtu do daňového priznania.',
  },
];

const contact = {
  name: "Ing. Mgr. Martin Gondár",
  role: "managing partner SmarTech Solutions SK",
  phone: "+421 904 352 451",
  email: "gondar@smartech.sk",
};
---

<BaseLayout title={title} description={description}>
  <!-- HERO -->
  <section class="page-hero">
    <div class="container">
      <p class="page-hero-label">INVESTÍCIE DO PRIEMYSLU 4.0</p>
      <h1 class="page-hero-title">
        {hero.heading}
      </h1>
    </div>
  </section>
  
  <!-- ÚVODNÝ TEXT + KALKULAČKA POD NÍM -->
  <section class="page-section page-section--light">
    <div class="container">
      <div class="home-section-divider"></div>
      <div class="vav-intro-text">
        <div class="vav-intro-copy">
          {hero.text}
        </div>
      </div>
      
      <div class="vav-calc-card">
        <h2 class="vav-calc-heading">Kalkulačka úspory</h2>
        <InvesticieCalculator />
      </div>

    </div>
  </section>

  <!-- PROCES UPLATNENIA -->
  <section class="page-section vav-process-section">
    <div class="container">
      <div class="home-section-divider"></div>
      <h2 class="page-section-title">Proces uplatnenia v bodoch</h2>
      <ProcessSteps steps={processSteps} />
    </div>
  </section>

  <!-- FAQ BLOK -->
  <section class="page-section page-section--light vav-faq-section">
    <div class="container">
      <div class="home-section-divider"></div>
      <h2 class="page-section-title">
        Najčastejšie otázky k investíciam do Priemyslu 4.0
      </h2>
      <FAQ category="investicie" />
    </div>
  </section>

  <!-- KONTAKT (rovnaký štýl ako na homepage) -->
  <section class="home-section" id="kontakt">
    <div class="container">
      <div class="home-section-divider"></div>

      <h2>Získajte odpoveď ihneď od odborníka s praxou.</h2>
      <p class="home-section-text">
        Každá firma je iná a preto sa radi pozrieme na konkrétne možnosti
        uplatnenia superodpočtu u Vás.
      </p>

      <div class="home-contact-card">
        <div>
          <p class="home-contact-name">{contact.name}</p>
          <p class="home-contact-role">{contact.role}</p>
          <p class="home-contact-contact">
            {contact.phone}
            <br />
            {contact.email}
          </p>

          <a
            href="https://www.smartech.sk"
            class="home-contact-button"
            target="_blank"
            rel="noopener"
          >
            Kontaktujte nás
          </a>
        </div>

        <div class="home-contact-photo">
          <img
            src="/images/MGO.webp"
            alt="Ing. Mgr. Martin Gondár"
            loading="lazy"
            decoding="async"
          />
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
