---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getEntry } from "astro:content";

type Seminar = {
  date: string;
  location: string;
  title: string;
  link?: string;
};

type ContactInfo = {
  name: string;
  role: string;
  phone: string;
  email: string;
};

const pageContent = await getEntry("pages", "home");
const { title, description, hero, sections, cards, cta } = pageContent.data;

// text pri seminároch
const seminarSection = {
  title: "Chcete sa dozvedieť viac o superodpočtoch a daňových úľavách?",
  lead: "Získajte know-how, ako na to.",
  text:
    "Prihláste sa na jeden z plánovaných seminárov a webinárov. Zistíte, na ktoré daňové úľavy máte nárok a ako si ju uplatniť.",
};

const seminars: Seminar[] = [
  {
    date: "10. 11. 2025",
    location: "Bratislava",
    title: "Meat & Learn",
    link: "#",
  },
  {
    date: "26. 11. 2025",
    location: "Bratislava",
    title:
      "Odpočet nákladov na výskum a vývoj, jeho uplatnenie v daňovom priznaní za rok 2025 a legislatívny stav platný pre rok 2026",
    link: "#",
  },
  {
    date: "8. 1. 2026",
    location: "online",
    title: "Bezplatný webinár podľa požiadaviek záujemcov",
    link: "#",
  },
];

const contact: ContactInfo = {
  name: "Ing. Mgr. Martin Gondár",
  role: "managing partner SmarTech Solutions SK",
  phone: "+421 904 352 451",
  email: "gondar@smartech.sk",
};
---

<BaseLayout title={title} description={description}>
  <!-- HERO: veľké H1 -->
  <section class="home-hero">
    <div class="container">
      <h1 class="home-hero-title">
        {hero.heading}
        <br />
        {hero.text}
      </h1>
    </div>
  </section>

    <!-- TYPY DAŇOVÉHO ZVÝHODNENIA (karty z home.md) -->
  {sections && sections[0] && (
    <section class="home-section home-section--benefits home-section--light">
      <div class="container">
        <div class="home-section-divider"></div>

        <h2>{sections[0].title}</h2>
        {sections[0].description && (
          <p class="home-section-text">
            {sections[0].description}
          </p>
        )}

        {cards && (
          <div class="home-benefit-grid">
            {cards.map((card) => {
              const link = card.link ?? "";

              const variantClass = link.includes("vyskum-a-vyvoj")
                ? "home-benefit-card--vav"
                : link.includes("investicie")
                ? "home-benefit-card--investicie"
                : "home-benefit-card--patent";

              return (
                <a
                  href={card.link}
                  class={`home-benefit-card ${variantClass}`}
                >
                  <div>
                    <div class="home-benefit-heading">{card.title}</div>
                    <p class="home-benefit-text">
                      {card.description}
                    </p>
                  </div>

                  <div class="home-benefit-plus">+</div>
                </a>
              );
            })}
          </div>
        )}
      </div>
    </section>
  )}

  <!-- SEMINÁRE -->
  <section class="home-section home-section--light" id="seminare">
    <div class="container">
      <div class="home-section-divider"></div>

      <h2>{seminarSection.title}</h2>
      <p class="home-section-lead">{seminarSection.lead}</p>
      <p class="home-section-text">{seminarSection.text}</p>

      <div class="home-seminars">
        {seminars.map((seminar) => (
          <a href={seminar.link ?? "#"} class="home-seminar-card">
            <div class="home-seminar-date">
              <div class="home-seminar-date-day">{seminar.date}</div>
              <div class="home-seminar-date-place">
                {seminar.location}
              </div>
            </div>

            <div class="home-seminar-content">
              <h3>{seminar.title}</h3>
            </div>

            <div class="home-seminar-arrow">›</div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- KONTAKT / CTA -->
  <section class="home-section" id="kontakt">
    <div class="container">
      <div class="home-section-divider"></div>

      <h2>
        {cta?.heading ?? "Získajte odpoveď ihneď od odborníka s praxou."}
      </h2>
      <p class="home-section-text">
        {cta?.text ??
          "Každá firma je iná a preto sa radi pozrieme na konkrétne možnosti uplatnenia superodpočtu u vás."}
      </p>

      <div class="home-contact-card">
        <div>
          <p class="home-contact-name">{contact.name}</p>
          <p class="home-contact-role">{contact.role}</p>
          <p class="home-contact-contact">
            {contact.phone}
            <br />
            {contact.email}
          </p>

          {cta && cta.buttonLink && cta.buttonText && (
            <a
              href={cta.buttonLink}
              class="home-contact-button"
              target="_blank"
              rel="noopener"
            >
              {cta.buttonText}
            </a>
          )}
        </div>

        <div class="home-contact-photo">
          <img
            src="/images/MGO.webp"
            alt="Ing. Mgr. Martin Gondár"
            loading="lazy"
            decoding="async"
          />
        </div>
      </div>
    </div>
  </section>

</BaseLayout>
